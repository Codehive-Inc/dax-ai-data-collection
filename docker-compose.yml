name: daxaicollection

services:
  # React Frontend - Data Collection
  dax-ai-data-collection:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: dax-ai-data-collection
    env_file:
      - ./.env.data-collection
    ports:
      - "3000:80"
    restart: always
    depends_on:
      - mstr-dax-api
      - cognos-dax-api
      - tableau-dax-api
    networks:
      - dax-network


  # MicroStrategy DAX API (placeholder - replace with actual service)
  mstr-dax-api:
    image: daxaicollection-microstrategy-dax-api:latest
    container_name: mstr-dax-api
    env_file:
      - ./.env.microstrategy-api
    ports:
      - "8001:8001"
    restart: always
    networks:
      - dax-network

  # Cognos DAX API (placeholder - replace with actual service)
  cognos-dax-api:
    image: daxaicollection-cognos-dax-api:latest
    container_name: cognos-dax-api
    env_file:
      - ./.env.cognos-dax-api
    ports:
      - "8003:8003"
    restart: always
    networks:
      - dax-network

  # Tableau DAX API (placeholder - replace with actual service)
  tableau-dax-api:
    image: daxaicollection-bi-migrator-dax-api:latest
    container_name: tableau-dax-api
    env_file:
      - ./.env.tableau-api
    ports:
      - "8004:8004"
    restart: always
    networks:
      - dax-network

networks:
  dax-network:
    driver: bridge

volumes:
  app-data:
    driver: local
  app-backups:
    driver: local

